# 项目文档：TravelFlow (智能旅行伴侣)

| 文档类型 | 版本 | 作者 | 日期 | 状态 |
| --- | --- | --- | --- | --- |
| PRD & SDD | v1.0 (MVP) | Xu Zhe | 2026-02-12 | Draft |

---

# 软件需求规格说明书 (PRD)

## 1. 引言 (Introduction)

### 1.1 项目背景

TravelFlow 旨在解决现代家庭旅行中“规划繁琐、行中混乱、记录分散”的痛点。区别于传统 OTA（在线旅游平台）的销售导向，TravelFlow 是一个**“以用户体验为中心”的智能管家**。

### 1.2 产品目标 (MVP)

构建一个基于 Web 的单页应用 (SPA/PWA)，核心流程覆盖：

1. **AI 极简规划：** 基于 LLM 生成结构化行程。
2. **行中智能流：** 基于时间/位置的上下文推荐（Next Action）。
3. **轨迹资产化：** 自动生成旅行足迹与回顾。

## 2. 用户画像 (User Persona)

* **核心用户：** 徐哲（34岁，IT从业者，二孩父亲）。
* **特征：** 追求效率，审美在线（喜欢霞鹜文楷/Notion风），重视亲子体验，需要极简的操作流程。
* **场景：** 一手抱娃，一手看手机，需要 3 秒内知道“下一站去哪，怎么走”。

## 3. 功能需求 (Functional Requirements)

### 3.1 模块一：行程规划 (Pre-Trip)

| ID | 功能名称 | 详细描述 | 验收标准 | 优先级 |
| --- | --- | --- | --- | --- |
| **F-01** | **自然语言创建** | 用户输入一段话（如“五一去长沙3天带两娃”），系统识别关键要素。 | 支持语音转文字输入；能识别目的地、天数、人数。 | P0 |
| **F-02** | **AI 方案生成** | 调用 Dify/LLM，结合联网搜索（天气、景点），生成结构化行程数据。 | 输出包含：每日概览、景点/餐厅/酒店的具体时间点、经纬度、推荐理由。 | P0 |
| **F-03** | **可视化编辑** | 提供类似“看板”或“时间轴”的视图，允许用户拖拽调整事件顺序。 | 拖拽即更新数据库时间；支持增删改查具体事件。 | P1 |

### 3.2 模块二：行中助手 (In-Trip)

| ID | 功能名称 | 详细描述 | 验收标准 | 优先级 |
| --- | --- | --- | --- | --- |
| **F-04** | **智能仪表盘** | 根据当前系统时间，高亮显示“进行中”的事件，置顶显示“下一个”事件。 | 首页首屏即展示；过往事件自动折叠或变灰。 | P0 |
| **F-05** | **一键导航** | 事件卡片提供“导航”按钮，根据设备类型唤起地图 App。 | 移动端唤起高德/百度 App；PC 端打开 Web 地图。 | P0 |
| **F-06** | **快捷记录** | 在当前事件卡片下，支持快速上传图片或文字备注。 | 图片压缩上传；自动关联当前 Event ID。 | P1 |

### 3.3 模块三：回顾与分享 (Post-Trip)

| ID | 功能名称 | 详细描述 | 验收标准 | 优先级 |
| --- | --- | --- | --- | --- |
| **F-07** | **轨迹地图** | 在地图上按时间顺序连接所有打卡点，形成轨迹线。 | 使用高德地图 API 绘制 Polyline；打卡点显示 Icon。 | P1 |
| **F-08** | **只读分享** | 生成一个加密的 URL，他人无需登录即可查看行程（只读模式）。 | 链接有效期可配置；分享页 UI 适配移动端。 | P2 |

## 4. 非功能需求 (NFR)

* **UI/UX:** 全局字体强制使用“霞鹜文楷” (LXGW WenKai)；采用 ShadcnUI 组件库；支持深色模式。
* **性能:** 首屏加载时间 (FCP) < 1.5s；操作响应延迟 < 200ms。
* **兼容性:** 核心适配移动端 Chrome/Safari (PWA 模式)，兼顾 PC 宽屏。
* **数据隐私:** 默认私有，通过 RLS (Row Level Security) 隔离用户数据。


3. **Phase 3 (Day 6-7): 地图与交互**
* 接入高德地图 API。
* 实现“点击导航”唤起 App 功能。
* 添加图片上传功能 (Supabase Storage)。
